<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard | EMIWIP</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      window.tailwind = {
        config: {
          theme: {
            extend: {
              colors: {
                indigo: { 900: '#1e1b4b', 800: '#312e81', 600: '#4f46e5' },
                slate: { 50: '#f8fafc', 100: '#f1f5f9', 800: '#1e293b', 900: '#0f172a' }
              }
            }
          }
        }
      }
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; }
        .sidebar-transition { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .active-nav { background: #312e81; border-left: 4px solid #818cf8; color: white !important; }
        .modal-backdrop { background: rgba(15, 23, 42, 0.6); backdrop-filter: blur(4px); }
        .status-badge { padding: 4px 10px; border-radius: 999px; font-size: 10px; font-weight: 800; text-transform: uppercase; }
        /* Smooth Scrollbar for Tables */
        .custom-scrollbar::-webkit-scrollbar { height: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #e2e8f0; border-radius: 10px; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 overflow-x-hidden">

    <div id="statusMessage" class="hidden fixed top-6 right-6 z-[100] p-4 rounded-2xl shadow-2xl text-white font-bold text-sm min-w-[280px] animate-bounce-in"></div>

    <div class="flex min-h-screen relative">
        <aside id="sidebar" class="sidebar-transition fixed lg:static inset-y-0 left-0 w-72 bg-indigo-900 text-white z-50 lg:translate-x-0 -translate-x-full shadow-2xl lg:shadow-none">
            <div class="p-8 border-b border-indigo-800 flex justify-between items-center">
                <div class="flex items-center gap-3">
                    <div class="w-8 h-8 bg-indigo-500 rounded-lg flex items-center justify-center">
                        <i class="fas fa-leaf text-white text-xs"></i>
                    </div>
                    <h1 class="text-xl font-black tracking-tighter uppercase">Emiwip</h1>
                </div>
                <button id="closeSidebarBtn" class="lg:hidden text-indigo-400 hover:text-white transition-colors">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <nav class="mt-8 px-4 space-y-2">
                <button id="navDashboard" class="nav-item active-nav w-full flex items-center px-6 py-4 rounded-xl font-bold transition-all text-indigo-300 hover:text-white">
                    <i class="fas fa-chart-pie mr-4"></i> Overview
                </button>
                <button id="navFleet" class="nav-item w-full flex items-center px-6 py-4 rounded-xl font-bold transition-all text-indigo-300 hover:bg-indigo-800 hover:text-white">
                    <i class="fas fa-truck-monster mr-4"></i> Fleet & Drivers
                </button>
                
                <div class="pt-10 border-t border-indigo-800/50 mt-10 px-6">
                    <p class="text-[10px] font-black text-indigo-500 uppercase tracking-[0.2em] mb-4">System</p>
                    <button onclick="handleLogout()" class="w-full flex items-center py-3 text-red-400 font-bold hover:text-red-300 transition-colors">
                        <i class="fas fa-power-off mr-4"></i> Logout
                    </button>
                </div>
            </nav>
        </aside>

        <main class="flex-1 min-w-0 overflow-hidden">
            <header class="bg-white/80 backdrop-blur-md border-b p-4 lg:p-6 flex justify-between items-center sticky top-0 z-40">
                <div class="flex items-center gap-4">
                    <button id="mobileMenuBtn" class="lg:hidden w-10 h-10 flex items-center justify-center bg-slate-100 rounded-xl text-slate-600">
                        <i class="fas fa-bars"></i>
                    </button>
                    <div>
                        <h2 id="pageTitle" class="text-lg lg:text-xl font-black text-slate-800 uppercase tracking-tight leading-none">Management Console</h2>
                        <p class="text-[10px] text-slate-400 font-bold uppercase mt-1 hidden sm:block">Admin Authorization Required</p>
                    </div>
                </div>
                <button id="refreshDataBtn" class="w-10 h-10 lg:w-12 lg:h-12 bg-indigo-50 text-indigo-600 rounded-2xl hover:bg-indigo-600 hover:text-white transition-all duration-300 shadow-sm flex items-center justify-center">
                    <i class="fas fa-sync-alt"></i>
                </button>
            </header>

            <div class="p-4 lg:p-8 max-w-7xl mx-auto space-y-8">
                
                <section id="wasteOverview" class="grid grid-cols-1 md:grid-cols-3 gap-4 lg:gap-6">
                    <div class="bg-white p-6 rounded-[2rem] border border-slate-100 shadow-sm flex items-center gap-5">
                        <div class="w-14 h-14 bg-amber-50 text-amber-500 rounded-2xl flex items-center justify-center text-xl">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div>
                            <p class="text-[10px] font-black text-slate-400 uppercase tracking-widest">Pending</p>
                            <h3 id="statPending" class="text-2xl font-black text-slate-800 leading-none">0</h3>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-[2rem] border border-slate-100 shadow-sm flex items-center gap-5 text-indigo-600">
                        <div class="w-14 h-14 bg-indigo-50 rounded-2xl flex items-center justify-center text-xl">
                            <i class="fas fa-truck-loading"></i>
                        </div>
                        <div>
                            <p class="text-[10px] font-black text-slate-400 uppercase tracking-widest">In Progress</p>
                            <h3 id="statActive" class="text-2xl font-black text-slate-800 leading-none">0</h3>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-[2rem] border border-slate-100 shadow-sm flex items-center gap-5">
                        <div class="w-14 h-14 bg-emerald-50 text-emerald-500 rounded-2xl flex items-center justify-center text-xl">
                            <i class="fas fa-check-double"></i>
                        </div>
                        <div>
                            <p class="text-[10px] font-black text-slate-400 uppercase tracking-widest">Cleared</p>
                            <h3 id="statCleared" class="text-2xl font-black text-slate-800 leading-none">0</h3>
                        </div>
                    </div>
                </section>

                <section id="viewDashboard">
                    <div class="flex items-center gap-6 border-b border-slate-200 mb-8 overflow-x-auto no-scrollbar">
                        <button data-tab="pending" class="tab-btn pb-4 text-indigo-600 border-b-4 border-indigo-600 font-black uppercase text-[10px] tracking-widest whitespace-nowrap">Pending Tasks</button>
                        <button data-tab="Active" class="tab-btn pb-4 text-gray-400 font-bold uppercase text-[10px] tracking-widest whitespace-nowrap">Active Ops</button>
                        <button data-tab="Cleared" class="tab-btn pb-4 text-gray-400 font-bold uppercase text-[10px] tracking-widest whitespace-nowrap">History</button>
                    </div>
                    <div id="reportsGrid" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
                        </div>
                </section>

                <section id="viewFleet" class="hidden space-y-8 lg:space-y-12 pb-20">
                    <div>
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-sm lg:text-base font-black text-slate-800 uppercase flex items-center">
                                <span class="w-2 h-6 bg-indigo-600 rounded-full mr-3"></span>
                                Account Requests
                            </h3>
                        </div>
                        <div class="bg-white rounded-[2rem] border overflow-hidden shadow-sm custom-scrollbar overflow-x-auto">
                            <table class="w-full text-left min-w-[600px]">
                                <thead class="bg-slate-50 border-b">
                                    <tr>
                                        <th class="p-6 text-[10px] font-black uppercase text-slate-400">Driver Name</th>
                                        <th class="p-6 text-[10px] font-black uppercase text-slate-400">Email Address</th>
                                        <th class="p-6 text-[10px] font-black uppercase text-slate-400 text-right">Action</th>
                                    </tr>
                                </thead>
                                <tbody id="driverApprovalTable" class="divide-y divide-slate-50"></tbody>
                            </table>
                        </div>
                    </div>

                    <div>
                        <h3 class="text-sm lg:text-base font-black text-slate-800 uppercase mb-6 flex items-center">
                            <span class="w-2 h-6 bg-indigo-600 rounded-full mr-3"></span>
                            Unit Verification
                        </h3>
                        <div class="bg-white rounded-[2rem] border overflow-hidden shadow-sm custom-scrollbar overflow-x-auto">
                            <table class="w-full text-left min-w-[700px]">
                                <thead class="bg-slate-50 border-b">
                                    <tr>
                                        <th class="p-6 text-[10px] font-black uppercase text-slate-400">Plate ID</th>
                                        <th class="p-6 text-[10px] font-black uppercase text-slate-400">Operator</th>
                                        <th class="p-6 text-[10px] font-black uppercase text-slate-400">Status</th>
                                        <th class="p-6 text-[10px] font-black uppercase text-slate-400 text-right">Action</th>
                                    </tr>
                                </thead>
                                <tbody id="fleetTableBody" class="divide-y divide-slate-50"></tbody>
                            </table>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <div id="assignmentModal" class="modal-backdrop hidden fixed inset-0 z-[60] flex items-center justify-center p-4">
        <div class="bg-white rounded-[2.5rem] p-8 lg:p-12 w-full max-w-lg shadow-2xl relative">
            <h3 class="text-2xl font-black text-slate-900 mb-2">Deploy Unit</h3>
            <p class="text-slate-400 text-xs font-bold uppercase mb-8">Assign a verified truck to this task</p>
            
            <form id="assignmentForm" class="space-y-6">
                <div>
                    <label class="block text-[10px] font-black text-indigo-500 uppercase tracking-widest mb-3">Available Fleet</label>
                    <select id="truckSelect" required class="w-full p-4 bg-slate-50 border-2 border-slate-100 rounded-xl font-bold text-slate-700 outline-none focus:border-indigo-500 transition-all"></select>
                </div>
                <div class="grid grid-cols-2 gap-4 pt-4">
                    <button type="button" class="close-modal py-4 font-black text-[10px] uppercase text-slate-400 hover:bg-slate-50 rounded-xl transition-all">Cancel</button>
                    <button type="submit" class="bg-indigo-600 py-4 rounded-xl font-black text-[10px] uppercase text-white shadow-lg shadow-indigo-100 hover:scale-[1.02] transition-all active:scale-95">Confirm</button>
                </div>
            </form>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="./js/admin-dashboard.js"></script>
</body>
</html>